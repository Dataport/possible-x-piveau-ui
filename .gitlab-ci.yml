cache:
  paths:
   - node_modules/

stages:
  - build
  # - publish

build-asset:
  stage: build
  image: node:16-alpine3.16
  only:
    - master
    - develop
  script:
    - npm ci
    - cp config/user-config.sample.js config/user-config.js
    - npm run build
  artifacts:
    paths:
      - dist

# publish package to npm repository:
#   stage: publish
#   image: node:lts-buster-slim
#   before_script:
#     - apt-get update && apt-get install -y --no-install-recommends git-core ca-certificates
#     - npm install --only=dev
#   only:
#     refs:
#       - master
#       - develop
#   script:
#     - npm run semantic-release
